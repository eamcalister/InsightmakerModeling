<?xml version='1.0' encoding='utf-8'?>

<section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="Sec1_2_insightmaker_model_examples">
	<title>Some Examples</title>

  <objectives>
		<ul>
	  		<li>
	  			<p>
				Explore both the ODEs from the last section and several modeling examples. 
	  			</p>
	  		</li>
			<li>
				<p>
				Discuss simulation and display settings in Insightmaker.	
				</p>
			</li>

	  	</ul>
  </objectives>

<example xml:id="Exp_Insight_Example"><title>Malthusian (Exponential) Growth</title>
	<p>
	Here we will consider the example given by <xref ref="Exp_as_IVP"/>, but add some context so that we can use more of the features of Insightmaker. Here is the set up for the problem: <em> A population of creatures is initially <m>10</m> and grows exponentially. If the population is <m>20</m> after three weeks, what will the population be in one year?</em>
	</p>
	<solution><title>Calculus Class Version</title>
	<p>
	First we will give the standard formulation and solution using Calculus. The problem may be reformulated as the IVP
	<me>
		P' = kP, P(0) = 10,
	</me>
	where <m>P</m> represents the number of creatures, the independent variable is <m>t = </m> time in weeks, and <m>k</m> is the continuous percent growth rate in units of <m>\frac{1}{\text{weeks}}</m>. We can then observe (by whatever technique you prefer) that the general solution is given by 
	<me>
		P(t) = 10e^{kt}.
	</me>
	Using the data point <m>P(3) = 20</m>, we find <m>k = \frac{\ln(2)}{3}\approx 0.23</m>. Thus, <m>P(52) \approx 10e^{0.23\cdot 52} \approx 165,140</m> creatures. <alert>However, this solution isn't the point of this text!</alert> We are only including it to reference the result. 
	</p>
	</solution>
	<solution><title>Using Insightmaker</title>
	<p>
	The Insight that we will use to solve this problem is below
	<interactive xml:id="Malthusian-Example-Insight" iframe="https://insightmaker.com/insight/2Yd7izSdPu4DhoalPCmI4g/embed?topBar=1;sideBar=1;zoom=1" width = "85%"/>
	</p>
	<sidebyside widths="60% 5% 40%" margins="auto" valign="top">
		<p>
		Two features we will use in this solution are having sliders linked and using the tabular output option. To show the output of the simulation as a table instead of the graph of a function, use the configuration button in the simulation window and choose "table" as indicated in the image to the right.
		</p>
		<p></p>
		<image source="images/TableButton.png" width="40%"><description>
			<p>
			Choosing the tabular output option.
			</p>
		</description></image>	
	</sidebyside>
	<sidebyside widths="60% 5% 40%" margins="auto" valign="top">
		<p>
		Upon scrolling through the table with <m>k=0.1</m>, we find <m>P(3) \approx 13.5</m>. Thus, <m>k</m> is too small.
		</p>
		<p></p>
		<image source="images/Exp_kequalspoint1.png" width="40%"><description>
			<p>
			Output at <m>t=3</m> when <m>k=0.1</m>.
			</p>
		</description></image>	
	</sidebyside>
	<sidebyside widths="60% 5% 40%" margins="auto" valign="top">
		<p>
		Adjusting the slider for <m>k</m> until we have <m>P(3)\approx 20</m>, we see the correct value of <m>k</m> is about <m>0.23</m>. If we adjust the step size in the slider below <m>0.01</m>, we can opbtain a more accurate value. 
		</p>
		<p></p>
		<image source="images/Exp_kequalspoint23.png" width="40%"><description>
			<p>
			Output at <m>t=3</m> when <m>k=0.23</m>.
			</p>
		</description></image>	
	</sidebyside>

	</solution>

</example>

<p>
	Now is a good time to discuss the simulation settings in Insightmaker. You get to these by clicking the "Settings" button in the top toolbar.
</p>

<sidebyside widths="60% 5% 40%" margins="auto" valign="top">
	<p>
		The first important settings are the <em>Basic Simulation Settings</em>. These include the following:
		<ul>
			<li>
				<p>
					<term>Simulation Start:</term> This is the time value at the start of the simulation, which is the time value indicated by the initial value problem (<m>t_0</m> in <xref ref="def-DE"/>).
				</p>
			</li>
			<li>
				<p>
					<term>Simulation Length:</term> This is how long the simulation will run. If you are interested in the value of a stock at some specific time after the start time, you may use the difference between the specified time and the start time as the simulation length.
				</p>
			</li>
			<li>
				<p>
					<term>Time Units:</term> This is the unit of time. For example, if Seconds are chosen, then <m>t=1</m> means <m>1</m> second.
				</p>
			</li>
		</ul>
	</p><p></p>
	<image source="images/BasicTimeSettings.png" width="40%"><description>
		<p>
		Basic Simulation Settings
		</p>
	</description></image>
	
	</sidebyside>

	<sidebyside widths="60% 5% 40%" margins="auto" valign="top">
		<p>
			Two more important settings are the <em>Advanced Simulation Settings</em>. These include the following:
			<ul>
				<li>
					<p>
						<term>Simulation Time Step:</term> 
					</p>
				</li>
				<li>
					<p>
						<term>Simullation Algorithm:</term> 
					</p>
				</li>
			</ul>
		</p><p></p>
		<image source="images/TimeStepandAlgorithm.png" width="40%"><description>
			<p>
			Basic Simulation Settings
			</p>
		</description></image>
		
		</sidebyside>

<example xml:id="Settings_Exploration"><title>Exploration of Settings</title>
	<p>
		In this example we will explore the simulation algorithm and step size settings in the context of the exponential growth model.
	</p>
</example>

<example xml:id="Circle_as_System_Insight_Example"><title>The Circular Functions as Solutions to a System</title>
	<p>
		Here we will explore the system of ODEs introduced in <xref ref="Circle_as_System"/> to show the scatter plot (phase plane) display setting and revisit the choice of display algorithm.
	</p>
</example>

<p>
	In the next example we consider the time it takes for an ant to build a tunnel of length <m>x</m>. This scenario is presented in <xref ref="ant-tunneling"/> as well as Project 1.6.3 in <xref ref="SIMIODE-text"/>. The approach presented here is specific to Insightmaker and is meant to help us understand how to build models of the real world; our examples so far have been more of an abstract mathematical nature.
</p>

<remark>
	<p>
		The Insightmaker model given below may seem to be built in a somewhat <em>ad hoc</em> way. In the next chapter we will try to make model building more systematic. However, keep in mind that modeling is a creative endeavor; there isn't an easy "build a model" algorithm.
	</p>
</remark>



<example xml:id="Ant_Tunneling"><title>Ant Tunneling</title>
	<p>
		Suppose that we have a mound of dirt of unknown size and we wish to tunnel through this mound. We will make the choice of a single stock, <m>V</m>, the volume of dirt removed from the mound in cubic centimeters. This will also be a good proxy for the length of the tunnel. The initial value for <m>V</m> should be <m>V(0) = 0</m>.
	</p>
	<p>
		Now we will build our variables. There are certainly many ways to proceed and what follows is just one:
		<ul>
			<li>
				<p>
					Let <m>r</m> be the radius of the tunnel (assuming its shape is cylindrical and straight) in cm. 
				</p>
			</li>
			<li>
				<p>
					Let <m>x</m> be the length of the tunnel, in cm, at time of <m>t</m> seconds. This is computable as <m>x = \dfrac{V}{\pi r^2}</m>.
				</p>
			</li>
			<li>
				<p>
					Let <m>k_{\text{scrape}}</m> be the rate in <m>\text{cm}^3/\text{s}</m> that we can remove (scrape) dirt from the end of the tunnel. 
				</p>
			</li>
			<li>
				<p>
					The main issue that makes the flow rate of <m>V</m> depend on <m>V</m> is that dirt scraped from the end of the tunnel must then be removed from the tunnel. We will assume that the velocity at which a volume <m>\Delta{V}</m> of dirt can be moved is inversely proportional to <m>\Delta{V}</m>. That is 
					<me>
						\text{velocity at which }\Delta{V}\text{ can be moved} = \frac{k_{\text{move}}}{\Delta{V}}
					</me>
					for some constant <m>k_{\text{move}}</m>. (Think about how plausible this is.)
				</p>
			</li>
		</ul>
	</p>
	<p>
		Now we can create links and flows. 
		<ul>
			<li>
				<p>
					We should have one flow into <m>V</m>. Clearly, <m>k_{\text{scrape}}</m> and <m>k_{\text{move}}</m> should be linked to this flow. Since the flow rate will depend on the length of the tunnel, we should also have a link from <m>x</m> to this flow. 
				</p>
			</li>
			<li>
				<p>
					Because <m>x</m> is computed from <m>V</m> and <m>r</m>, there should be links pointing from <m>V</m> and <m>r</m> to <m>x</m>.
				</p>
			</li>
		</ul>
		At this point we have the following diagram:
		<figure xml:id="AntTunnelDiagram">
			<caption>The diagram of dependencies for the ant tunneling problem.</caption>
			<image source="images/AntTunnelInsight.png" width="70%"></image>
		</figure>
	</p>
	<p>
		Now we can derive the formula for the flow rate into <m>V</m>. Observe that for a small change in volume, <m>\Delta{V}</m>, the time it takes to remove that volume is given by
		<me>
			\Delta{t} = \frac{\Delta{V}}{k_{\text{scrape}}} + \frac{x}{k_{\text{move}}/\Delta{V}}.
		</me>
		A little algebra and taking the limit as <m>\Delta{V}\to 0</m> then yields
		<me>
			\frac{dV}{dt} = \frac{1}{\frac{1}{k_{\text{scrape}}} + \frac{x}{k_{\text{move}}}}.
		</me>
		We would enter this into the formula for the flow as <code>1/(1/[k_scrape]+[x]/([k_move]))</code>.
		Observe that for finding the analytic solution to this ODE, we would write it as 
		<me>
			\frac{dV}{dt} = \frac{1}{\frac{1}{k_{\text{scrape}}} + \frac{V}{k_{\text{move}}\pi r^2}}.
		</me>	
	</p>
	<p>
	Finally, we can add one more item so that we can graph the solution to the problem posed in the original SIMIODE scenario. That is, we wish to graph the time <m>T(x)</m> to tunnel <m>x</m> cm as a function of <m>x</m>. So far we have <m>x</m> as a function of time. To do this we create time as a stock, with initial value zero, and flow rate <m>1</m>. Now running the simulation in scatter plot format with the new time stock on the vertical axis and <m>x</m> on the horizontal gives us the desired graph. A complete Insight is given below (with several variables set arbitrarily at one).	
	</p>
	<p>
		<interactive xml:id="Ant-Tunneling-Insight" iframe="https://insightmaker.com/insight/1Zu4Hbs8F4258DG73eqNbj/embed?topBar=1;sideBar=1;zoom=1" width = "85%"/>
	</p>

</example>

<exercise>
	<p>
	Based on the results of the above simulation, is it better to have one ant dig the entire tunnel or have two ants start at opposite ends and meet in the middle?
	</p>
</exercise>

<remark>
	<p>
		The Insightmaker model construction in <xref ref="Ant_Tuneling"/> may seem to be built in a somewhat <em>ad hoc</em> way. In <xref ref="Intro_dimensional_analysis"/> and <xref ref="First_Order_Scenarios"/> we will try to make model building more systematic. However, keep in mind that modeling is a creative endeavor; there isn't an easy "build a model" algorithm.
	</p>
</remark>

</section>
